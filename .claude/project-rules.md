# プロジェクトルール

## コード品質

### Python コード
- **フォーマット**: Black フォーマッター使用
- **型ヒント**: 必須（関数の引数・戻り値）
- **docstring**: 複雑な関数には説明を追加
- **例外処理**: try-except で適切にハンドリング
- **ログ**: `common_utils.logger` を使用した統一ログ

### TypeScript/React コード
- **フォーマット**: ESLint 設定に従う
- **型定義**: 厳格な型定義を使用
- **コンポーネント**: 関数コンポーネント + Hooks
- **スタイル**: Tailwind CSS のみ使用
- **状態管理**: Context API 優先

## セキュリティ

### 機密情報
- APIキー、認証情報は環境変数で管理
- `.env` ファイルはコミットしない
- サービスアカウントキーはコミットしない
- ログで機密情報をマスキング

### 入力検証
- ファイルサイズ・形式の制限
- SQL インジェクション対策
- XSS 対策
- CSRF 対策

## パフォーマンス

### フロントエンド
- 画像の圧縮・リサイズ
- コンポーネントの適切なメモ化
- 必要に応じた遅延読み込み

### バックエンド
- 適切なキャッシュ戦略
- データベースクエリの最適化
- 非同期処理の活用

## テスト

### 必須テスト
- 新機能には必ずテストを追加
- 既存機能の変更時は関連テストを更新
- エラーケースのテストも実装

### テスト種類
- 単体テスト（pytest）
- 統合テスト（GCP エミュレータ使用）
- エンドツーエンドテスト（主要フロー）

## Git 運用

### ブランチ戦略
- `main`: 本番環境
- `develop`: 開発環境
- `feature/機能名`: 機能開発

### コミット
- 日本語でわかりやすいメッセージ
- 1コミット1機能を心がける
- 実際のコミットは禁止（メッセージのみ出力）

## ドキュメント

### 更新必須
- README.md（機能追加時）
- API仕様書（エンドポイント変更時）
- 環境設定手順（設定変更時）

### コメント
- 複雑なロジックには説明コメント
- TODOコメントは定期的に見直し
- なぜ（why）を重視した説明

これらのルールに従って、一貫性のある高品質なコードを維持してください。